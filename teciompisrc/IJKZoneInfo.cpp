#include "ThirdPartyHeadersBegin.h"
#include <algorithm>
#include "ThirdPartyHeadersEnd.h"
#include "SzlFileLoader.h"
#include "IJKZoneInfo.h"
namespace tecplot { namespace ___3934 { ___1843 const ___1880::ijkCornerOffset[NUM_IJK_CELL_CORNERS] = { ___1843(0, 0, 0), ___1843(1, 0, 0), ___1843(1, 1, 0), ___1843(0, 1, 0), ___1843(0, 0, 1), ___1843(1, 0, 1), ___1843(1, 1, 1), ___1843(0, 1, 1) }; ___1843 const ___1880::ijkFaceNeighborOffset[NUM_IJK_CELL_FACES] = { ___1843((___81)-1, (___81)0, (___81)0), ___1843((___81)1, (___81)0, (___81)0), ___1843((___81)0, (___81)-1, (___81)0), ___1843((___81)0, (___81)1, (___81)0), ___1843((___81)0, (___81)0, (___81)-1), ___1843((___81)0, (___81)0, (___81)1) }; ___372 ___1880::getNodeSubzonesInRange( ___1843 const& nodeIJKStart, ___1843 const& nodeIJKEnd, ___3270<ItemAddress64::SubzoneAddress>& refNszAddresses) const { REQUIRE(nodeIJKStart <= nodeIJKEnd); REQUIRE(refNszAddresses.empty()); ___372 ___2038 = ___4227; try { refNszAddresses.reserve(NUM_IJK_CELL_CORNERS); refNszAddresses.___3504(NUM_IJK_CELL_CORNERS); ItemAddress64::SubzoneAddress* ___1119 = refNszAddresses.data(); ___1119[0] = nodeAddressAtNodeIJK(nodeIJKStart).subzoneAddress(); ___1119[1] = nodeAddressAtNodeIJK(___1843(nodeIJKEnd.i(), nodeIJKStart.___2104(), nodeIJKStart.___2133())).subzoneAddress(); ___1119[2] = nodeAddressAtNodeIJK(___1843(nodeIJKStart.i(), nodeIJKEnd.___2104(), nodeIJKStart.___2133())).subzoneAddress(); ___1119[3] = nodeAddressAtNodeIJK(___1843(nodeIJKEnd.i(), nodeIJKEnd.___2104(), nodeIJKStart.___2133())).subzoneAddress(); ___1119[4] = nodeAddressAtNodeIJK(___1843(nodeIJKStart.i(), nodeIJKStart.___2104(), nodeIJKEnd.___2133())).subzoneAddress(); ___1119[5] = nodeAddressAtNodeIJK(___1843(nodeIJKEnd.i(), nodeIJKStart.___2104(), nodeIJKEnd.___2133())).subzoneAddress(); ___1119[6] = nodeAddressAtNodeIJK(___1843(nodeIJKStart.i(), nodeIJKEnd.___2104(), nodeIJKEnd.___2133())).subzoneAddress(); ___1119[7] = nodeAddressAtNodeIJK(nodeIJKEnd).subzoneAddress(); CellNodeIndex_t numRefNszs; if (___1119[0] != ___1119[1]) { ___476(___1119[2] != ___1119[3] && ___1119[4] != ___1119[5] && ___1119[6] != ___1119[7]); if (___1119[0] != ___1119[2]) { ___476(___1119[1] != ___1119[3] && ___1119[4] != ___1119[6] && ___1119[5] != ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); numRefNszs = 8; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3] && ___1119[3] < ___1119[4] && ___1119[4] < ___1119[5] && ___1119[5] < ___1119[6] && ___1119[6] < ___1119[7]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefNszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } } else { ___476(___1119[1] == ___1119[3] && ___1119[4] == ___1119[6] && ___1119[5] == ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); ___1119[2] = ___1119[4]; ___1119[3] = ___1119[5]; numRefNszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefNszs = 2; ___476(___1119[0] < ___1119[1]); } } } else { ___476(___1119[2] == ___1119[3] && ___1119[4] == ___1119[5] && ___1119[6] == ___1119[7]); if (___1119[0] != ___1119[2]) { ___476(___1119[1] != ___1119[3] && ___1119[4] != ___1119[6] && ___1119[5] != ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]);
___1119[1] = ___1119[2]; ___1119[2] = ___1119[4]; ___1119[3] = ___1119[6]; numRefNszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); ___1119[1] = ___1119[2]; numRefNszs = 2; ___476(___1119[0] < ___1119[1]); } } else { ___476(___1119[1] == ___1119[3] && ___1119[4] == ___1119[6] && ___1119[5] == ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); ___1119[1] = ___1119[4]; numRefNszs = 2; ___476(___1119[0] < ___1119[1]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefNszs = 1; } } } ___476(numRefNszs > 0); refNszAddresses.___3504(numRefNszs); } catch (...) { ___2038 = ___1184("Out of memory getting referenced node subzones for a cell subzone in ordered zone"); } ENSURE(VALID_BOOLEAN(___2038)); ENSURE(IMPLICATION(___2038, !refNszAddresses.empty())); ENSURE(IMPLICATION(___2038, std::is_sorted(refNszAddresses.begin(), refNszAddresses.end()))); ENSURE(IMPLICATION(___2038, validNszAddress(refNszAddresses[refNszAddresses.size()-1]))); return ___2038; } ___372 ___1880::getCszReferencedNszs( ItemAddress64::SubzoneAddress const&     cszAddress, ___3270<ItemAddress64::SubzoneAddress>& refNszAddresses) const { REQUIRE(validCszAddress(cszAddress)); REQUIRE(refNszAddresses.empty()); ___1843 const nodeIJKStart = ___688(cszAddress.subzoneOffset()); ___1843 const nodeIJKEnd = (___687(cszAddress.subzoneOffset()) + 1).minOp(___2198()); ___372 ___2038 = getNodeSubzonesInRange(nodeIJKStart, nodeIJKEnd, refNszAddresses); ENSURE(VALID_BOOLEAN(___2038)); ENSURE(IMPLICATION(___2038, !refNszAddresses.empty())); ENSURE(IMPLICATION(___2038, std::is_sorted(refNszAddresses.begin(), refNszAddresses.end()))); ENSURE(IMPLICATION(___2038, validNszAddress(refNszAddresses[refNszAddresses.size()-1]))); return ___2038; } ___372 ___1880::getCellSubzonesInRange( ___1843 const& cellIJKStart, ___1843 const& cellIJKEnd, ___3270<ItemAddress64::SubzoneAddress>& refCszAddresses) const { REQUIRE(cellIJKStart <= cellIJKEnd); REQUIRE(refCszAddresses.empty()); ___372 ___2038 = ___4227; try { refCszAddresses.reserve(NUM_IJK_CELL_CORNERS); refCszAddresses.___3504(NUM_IJK_CELL_CORNERS); ItemAddress64::SubzoneAddress* ___1119 = refCszAddresses.data(); ___1119[0] = cellAddressAtCellIJK(cellIJKStart).subzoneAddress(); ___1119[1] = cellAddressAtCellIJK(___1843(cellIJKEnd.i(), cellIJKStart.___2104(), cellIJKStart.___2133())).subzoneAddress(); ___1119[2] = cellAddressAtCellIJK(___1843(cellIJKStart.i(), cellIJKEnd.___2104(), cellIJKStart.___2133())).subzoneAddress(); ___1119[3] = cellAddressAtCellIJK(___1843(cellIJKEnd.i(), cellIJKEnd.___2104(), cellIJKStart.___2133())).subzoneAddress(); ___1119[4] = cellAddressAtCellIJK(___1843(cellIJKStart.i(), cellIJKStart.___2104(), cellIJKEnd.___2133())).subzoneAddress(); ___1119[5] = cellAddressAtCellIJK(___1843(cellIJKEnd.i(), cellIJKStart.___2104(), cellIJKEnd.___2133())).subzoneAddress(); ___1119[6] = cellAddressAtCellIJK(___1843(cellIJKStart.i(), cellIJKEnd.___2104(), cellIJKEnd.___2133())).subzoneAddress(); ___1119[7] = cellAddressAtCellIJK(cellIJKEnd).subzoneAddress(); CellNodeIndex_t numRefCszs; if (___1119[0] != ___1119[1]) {
___476(___1119[2] != ___1119[3] && ___1119[4] != ___1119[5] && ___1119[6] != ___1119[7]); if (___1119[0] != ___1119[2]) { ___476(___1119[1] != ___1119[3] && ___1119[4] != ___1119[6] && ___1119[5] != ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); numRefCszs = 8; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3] && ___1119[3] < ___1119[4] && ___1119[4] < ___1119[5] && ___1119[5] < ___1119[6] && ___1119[6] < ___1119[7]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefCszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } } else { ___476(___1119[1] == ___1119[3] && ___1119[4] == ___1119[6] && ___1119[5] == ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); ___1119[2] = ___1119[4]; ___1119[3] = ___1119[5]; numRefCszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefCszs = 2; ___476(___1119[0] < ___1119[1]); } } } else { ___476(___1119[2] == ___1119[3] && ___1119[4] == ___1119[5] && ___1119[6] == ___1119[7]); if (___1119[0] != ___1119[2]) { ___476(___1119[1] != ___1119[3] && ___1119[4] != ___1119[6] && ___1119[5] != ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); ___1119[1] = ___1119[2]; ___1119[2] = ___1119[4]; ___1119[3] = ___1119[6]; numRefCszs = 4; ___476(___1119[0] < ___1119[1] && ___1119[1] < ___1119[2] && ___1119[2] < ___1119[3]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); ___1119[1] = ___1119[2]; numRefCszs = 2; ___476(___1119[0] < ___1119[1]); } } else { ___476(___1119[1] == ___1119[3] && ___1119[4] == ___1119[6] && ___1119[5] == ___1119[7]); if (___1119[0] != ___1119[4]) { ___476(___1119[1] != ___1119[5] && ___1119[2] != ___1119[6] && ___1119[3] != ___1119[7]); ___1119[1] = ___1119[4]; numRefCszs = 2; ___476(___1119[0] < ___1119[1]); } else { ___476(___1119[1] == ___1119[5] && ___1119[2] == ___1119[6] && ___1119[3] == ___1119[7]); numRefCszs = 1; } } } ___476(numRefCszs > 0); refCszAddresses.___3504(numRefCszs); } catch (...) { ___2038 = ___1184("Out of memory getting referenced cell subzones for a cell subzone in ordered zone"); } ENSURE(VALID_BOOLEAN(___2038)); ENSURE(IMPLICATION(___2038, !refCszAddresses.empty())); ENSURE(IMPLICATION(___2038, std::is_sorted(refCszAddresses.begin(), refCszAddresses.end()))); ENSURE(IMPLICATION(___2038, validCszAddress(refCszAddresses[refCszAddresses.size()-1]))); return ___2038; } ___372 ___1880::getNszReferencedCszs( ItemAddress64::SubzoneAddress const&     nszAddress, ___3270<ItemAddress64::SubzoneAddress>& refCszAddresses) const { REQUIRE(validNszAddress(nszAddress)); REQUIRE(refCszAddresses.empty()); ___1843 const cellIJKStart = ___2762(nszAddress.subzoneOffset()).maxOp(1)-1; ___1843 const cellIJKEnd = ___2761(nszAddress.subzoneOffset()).minOp(m_cszInfo.ijkLastIndex()); ___372 ___2038 = getCellSubzonesInRange(cellIJKStart, cellIJKEnd, refCszAddresses); ENSURE(VALID_BOOLEAN(___2038)); ENSURE(IMPLICATION(___2038, !refCszAddresses.empty())); ENSURE(IMPLICATION(___2038, std::is_sorted(refCszAddresses.begin(), refCszAddresses.end()))); ENSURE(IMPLICATION(___2038, validCszAddress(refCszAddresses[refCszAddresses.size()-1]))); return ___2038; } ___463 ___1880::getCellsAroundNodeIJK(
___1843 const& nodeIJK, ___3270<ItemAddress64>& adjacentCells) const { adjacentCells.reserve(NUM_IJK_CELL_CORNERS); adjacentCells.___3504(NUM_IJK_CELL_CORNERS); ___1843 const cellIJKm = nodeIJK.maxOp(1) - 1; ___1843 const cellIJKp = nodeIJK.minOp(m_cszInfo.ijkLastIndex()); ___463 numAdjCells; adjacentCells[0] = m_cszInfo.itemAddressAtItemIJK(cellIJKm); if (cellIJKm.i() != cellIJKp.i()) { adjacentCells[1] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKp.i(), cellIJKm.___2104(), cellIJKm.___2133())); if (cellIJKm.___2104() != cellIJKp.___2104()) { adjacentCells[2] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKp.___2104(), cellIJKm.___2133())); adjacentCells[3] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKp.i(), cellIJKp.___2104(), cellIJKm.___2133())); if (cellIJKm.___2133() != cellIJKp.___2133()) { adjacentCells[4] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKm.___2104(), cellIJKp.___2133())); adjacentCells[5] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKp.i(), cellIJKm.___2104(), cellIJKp.___2133())); adjacentCells[6] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKp.___2104(), cellIJKp.___2133())); adjacentCells[7] = m_cszInfo.itemAddressAtItemIJK(cellIJKp); numAdjCells = 8; } else { ___476(cellIJKp == ___1843(cellIJKp.i(), cellIJKp.___2104(), cellIJKm.___2133())); numAdjCells = 4; } } else { if (cellIJKm.___2133() != cellIJKp.___2133()) { adjacentCells[2] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKm.___2104(), cellIJKp.___2133())); ___476(cellIJKp == ___1843(cellIJKp.i(), cellIJKm.___2104(), cellIJKp.___2133())); adjacentCells[3] = m_cszInfo.itemAddressAtItemIJK(cellIJKp); numAdjCells = 4; } else { ___476(cellIJKp == ___1843(cellIJKp.i(), cellIJKm.___2104(), cellIJKm.___2133())); numAdjCells = 2; } } } else { if (cellIJKm.___2104() != cellIJKp.___2104()) { adjacentCells[1] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKp.___2104(), cellIJKm.___2133())); if (cellIJKm.___2133() != cellIJKp.___2133()) { adjacentCells[2] = m_cszInfo.itemAddressAtItemIJK(___1843(cellIJKm.i(), cellIJKm.___2104(), cellIJKp.___2133())); ___476(cellIJKp == ___1843(cellIJKm.i(), cellIJKp.___2104(), cellIJKp.___2133())); adjacentCells[3] = m_cszInfo.itemAddressAtItemIJK(cellIJKp); numAdjCells = 4; } else { ___476(cellIJKp == ___1843(cellIJKm.i(), cellIJKp.___2104(), cellIJKm.___2133())); numAdjCells = 2; } } else { if (cellIJKm.___2133() != cellIJKp.___2133()) { ___476(cellIJKp == ___1843(cellIJKm.i(), cellIJKm.___2104(), cellIJKp.___2133())); adjacentCells[1] = m_cszInfo.itemAddressAtItemIJK(cellIJKp); numAdjCells = 2; } else { ___476(cellIJKp == cellIJKm); numAdjCells = 1; } } } adjacentCells.___3504(numAdjCells); ENSURE(numAdjCells > 0 && numAdjCells <= NUM_IJK_CELL_CORNERS);
 #ifndef NO_ASSERTS
for (___463 adjCell = 0; adjCell < numAdjCells; adjCell++) { ENSURE(validCellAddress(adjacentCells[adjCell])); if (adjCell > 0) { ___463 const adjCellIndexM = m_cszInfo.itemIndexAtItemAddress(adjacentCells[adjCell - 1]); ___463 const adjCellIndexP = m_cszInfo.itemIndexAtItemAddress(adjacentCells[adjCell]); ENSURE(adjCellIndexM < adjCellIndexP); } }
 #endif
return numAdjCells; } }}
