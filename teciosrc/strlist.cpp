#include "MASTER.h"
#include "GLOBAL.h"
#include "CodeContract.h"
#include "STRUTIL.h"
#include "ALLOC.h"
#include "ARRLIST.h"
#include "STRLIST.h"
using namespace tecplot; static ___372 StringListItemDestructor(void*      ___2097, ___90 ___492) { REQUIRE(VALID_REF(___2097)); REQUIRE(VALID_REF(*static_cast<char**>(___2097)) || *static_cast<char**>(___2097) == NULL); ___4279(___492); char** StringRef = static_cast<char**>(___2097); if (*StringRef != NULL) { ___1528(*StringRef, "string"); *StringRef = NULL; } ENSURE(*StringRef == NULL); return ___4227; } static ___372 StringListItemDuplicator(void*      ___3950, void*      ___3646, ___90 ___492) { REQUIRE(VALID_REF(___3950)); REQUIRE(VALID_REF(___3646)); REQUIRE(VALID_REF(*static_cast<char**>(___3646)) || *static_cast<char**>(___3646) == NULL); ___4279(___492); ___372 ___2039 = ___4227; char** TargetStringRef = static_cast<char**>(___3950); char** SourceStringRef = static_cast<char**>(___3646); if (*SourceStringRef != NULL) ___2039 = ((*TargetStringRef = ___1133(___1095(*SourceStringRef))) != NULL); else *TargetStringRef = NULL; ENSURE(VALID_REF(*TargetStringRef) || *TargetStringRef == NULL); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ___3849(___3840 ___3820) { ___372 ___2066 = ArrayListIsValid(reinterpret_cast<___134>(___3820)); if (___2066) { ___2226 stringCount = ___101(reinterpret_cast<___134>(___3820));
 #if defined PERFORM_EXPENSIVE_STRLIST_TESTS
{ for (___2226 index = 0; index < stringCount; index++) { char* string = ___100(reinterpret_cast<___134>(___3820), index); if (string != NULL && !VALID_REF(string)) { ___2066 = ___1303; break; } } }
 #else
{ if (stringCount > 0) { char* string = ___100(reinterpret_cast<___134>(___3820), 0); if (string != NULL && !VALID_REF(string)) { ___2066 = ___1303; } } if (___2066 && stringCount > 1) { char* string = ___100(reinterpret_cast<___134>(___3820), stringCount - 1); if (string != NULL && !VALID_REF(string)) { ___2066 = ___1303; } } }
 #endif 
} ENSURE(VALID_BOOLEAN(___2066)); return ___2066; } void ___3825(___3840 ___3821) { REQUIRE(___3849(___3821)); ArrayListDeleteAllItems(reinterpret_cast<___134>(___3821), StringListItemDestructor, 0); ENSURE(___3849(___3821) && ___3827(___3821) == 0); } void ___3842(___3840 ___3821, ___2226     ___3855, ___2226     ___682) { REQUIRE(___3849(___3821)); REQUIRE(0 <= ___3855 && ___3855 <= ___3827(___3821) - 1); REQUIRE(1 <= ___682 && ___3855 + ___682 <= ___3827(___3821)); ArrayListDeleteItems(reinterpret_cast<___134>(___3821), ___3855, ___682, StringListItemDestructor, 0); ENSURE(___3849(___3821)); } void ___3841(___3840 ___3821, ___2226     ___3855) { REQUIRE(___3849(___3821)); REQUIRE(0 <= ___3855 && ___3855 <= ___3827(___3821) - 1); ArrayListDeleteItems(reinterpret_cast<___134>(___3821), ___3855, 1, StringListItemDestructor, 0); ENSURE(___3849(___3821)); } void ___3829(___3840* ___3821) { REQUIRE(VALID_REF(___3821)); REQUIRE(*___3821 == NULL || ___3849(*___3821)); if (*___3821 != NULL) ArrayListDealloc(reinterpret_cast<___134*>(___3821), StringListItemDestructor, 0); ENSURE(*___3821 == NULL); } ___3840 ___3822() { ___3840 ___3360 = reinterpret_cast<___3840>(ArrayListAlloc(0, ArrayListType_CharPtr, NULL, 0)); ENSURE(___3360 == NULL || ___3849(___3360)); return ___3360; } ___372 ___3824(___3840 ___3821, char const*   ___3814) { REQUIRE(___3849(___3821)); REQUIRE(___3814 == NULL || VALID_REF(___3814)); ___372 ___2039 = ___3844(___3821, ___3827(___3821), ___3814); ENSURE(___3849(___3821)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___2226 ___3827(___3840 ___3821) { REQUIRE(___3849(___3821)); ___2226 ___3360 = ___101(reinterpret_cast<___134>(___3821)); ENSURE(___3360 >= 0); return ___3360; } char* ___3835(___3840 ___3821, ___2226     ___3855) { REQUIRE(___3849(___3821)); REQUIRE(0 <= ___3855 && ___3855 <= ___3827(___3821) - 1); char* ___3360; char const* StringRef = ___3836(___3821, ___3855); if (StringRef == NULL) ___3360 = NULL; else ___3360 = ___1133(___1095(StringRef)); ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; }
 #if !defined USE_MACROS_FOR_FUNCTIONS
char const* ___3837(___3840 ___3821, ___2226     ___3855) { REQUIRE(___3849(___3821)); REQUIRE(0 <= ___3855 && ___3855 <= ___3827(___3821) - 1); char const* ___3360 = ___3838(___3821, ___3855); ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; }
 #endif
___372 ___3844(___3840 ___3821, ___2226     ___3855, char const*   ___3814) { REQUIRE(___3849(___3821)); REQUIRE(___3855 >= 0); REQUIRE(___3814 == NULL || VALID_REF(___3814)); ___372       ___2039; ArrayListItem_u ItemCopy; if (___3814 != NULL) { ItemCopy.___472 = ___1133(___1095(___3814)); ___2039 = (ItemCopy.___472 != NULL); } else { ItemCopy.___472 = NULL; ___2039 = ___4227; } if (___2039) ___2039 = ArrayListSetItem(reinterpret_cast<___134>(___3821), ___3855, ItemCopy, StringListItemDestructor, 0); ENSURE(___3849(___3821)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ___3839(___3840 ___3821, ___2226     ___3855, char const*   ___3814) { REQUIRE(___3849(___3821)); REQUIRE(___3855 >= 0); REQUIRE(___3814 == NULL || VALID_REF(___3814)); ___372       ___2039; ArrayListItem_u ItemCopy; if (___3814 != NULL) { ItemCopy.___472 = ___1133(___1095(___3814)); ___2039 = (ItemCopy.___472 != NULL); } else { ItemCopy.___472 = NULL; ___2039 = ___4227; } if (___2039) ___2039 = ArrayListInsertItem(reinterpret_cast<___134>(___3821), ___3855, ItemCopy); ENSURE(___3849(___3821)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___3840 ___3826(___3840 ___3821) { REQUIRE(___3849(___3821)); ___3840 ___3360 = reinterpret_cast<___3840>(ArrayListCopy(reinterpret_cast<___134>(___3821), StringListItemDuplicator, 0)); ENSURE(___3360 == NULL || (___3849(___3360) && ___3827(___3360) == ___3827(___3821))); return ___3360; } ___372 ___3823(___3840 ___3947, ___3840 ___3643) { REQUIRE(___3849(___3947)); REQUIRE(___3849(___3643)); ___3840 SourceCopy = ___3826(___3643); ___372 ___2039 = (SourceCopy != NULL); if (___2039) { ArrayListAppend(reinterpret_cast<___134>(___3947), reinterpret_cast<___134>(SourceCopy)); ArrayListDealloc(static_cast<___134*>(static_cast<void*>(&SourceCopy)), NULL, 0); } ENSURE(___3849(___3947)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } char* ___3848(___3840 ___3821) { REQUIRE(___3849(___3821)); size_t ___2223 = 0; ___2226 ___682 = ___3827(___3821); if (___682 >= 1) { ___2226 ___1925; for (___1925 = 0, ___2223 = strlen("\n") * (___682 - 1); ___1925 < ___682; ___1925++) { char* ___3814 = ___100(reinterpret_cast<___134>(___3821), ___1925); if (___3814 != NULL) ___2223 += strlen(___3814); } } char* ___3360 = ___23(___2223 + 1, char, "new line separated string"); if (___3360 != NULL) { ___2226 ___1925; for (___1925 = 0, strcpy(___3360, ""); ___1925 < ___682; ___1925++) { char* ___3814 = ___100(reinterpret_cast<___134>(___3821), ___1925); if (___1925 != 0) strcat(___3360, "\n"); if (___3814 != NULL) strcat(___3360, ___3814); } } ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; } ___3840 ___3832(char const* ___3814)
{ REQUIRE(VALID_REF(___3814)); ___3840 ___3360 = ___3822(); int ___3686; int EndIndex; for (___3686 = EndIndex = 0; ___3360 != NULL; EndIndex++) { if (___3814[EndIndex] == '\n' || ___3814[EndIndex] == '\0') { int ___2223 = EndIndex - ___3686; char* SubString = ___23(___2223 + 1, char, "sub string"); if (SubString != NULL) { ___676(SubString, ___3814, ___3686, ___2223); ___3824(___3360, SubString); ___1528(SubString, "sub string"); if (___3814[EndIndex] != '\0') ___3686 = EndIndex + 1; else break; } else { ___3829(&___3360); ___3360 = NULL; break; } } } ENSURE(___3360 == NULL || ___3849(___3360)); return ___3360; } char** ___3846(___3840 ___3821) { REQUIRE(___3849(___3821)); char** ___3360 = static_cast<char**>(ArrayListToArray(reinterpret_cast<___134>(___3821), StringListItemDuplicator, 0)); ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; } ___3840 ___3830(char const** ___3817, ___2226    ___682) { REQUIRE((___682 == 0 && ___3817 == NULL) || (___682 >= 1 && VALID_REF(___3817))); ___3840 ___3360 = reinterpret_cast<___3840>(ArrayListFromArray(static_cast<void*>(___3817), ___682, ArrayListType_CharPtr, StringListItemDuplicator, 0)); ENSURE(___3360 == NULL || ___3849(___3360)); return ___3360; }
 #define ISJOINCHAR(c) ((c == ';') || (c == '+'))
static void SkipWhiteSpaceOrComma(char const** ___683) { REQUIRE(VALID_REF(___683) && VALID_REF(*___683)); while (___2081(**___683) || (**___683 == ',')) (*___683)++; } static ___372 GetNextSubString(char const** OriginalCPtr, char**       NextSubString) { REQUIRE(VALID_REF(OriginalCPtr) && (VALID_REF(*OriginalCPtr))); REQUIRE(VALID_REF(NextSubString)); ___372 ___2039 = ___4227; *NextSubString = NULL; char const* ___683 = *OriginalCPtr; SkipWhiteSpaceOrComma(&___683); char InsideDelimiter = '\0'; if (*___683 == '"'|| *___683 == '\'') { InsideDelimiter = *___683; ___683++; } char const* CStart = ___683; while (*___683 && ((InsideDelimiter && (*___683 != InsideDelimiter)) || (!InsideDelimiter && (*___683 != ',')       && !ISJOINCHAR(*___683)  && !___2081(*___683)))) { if (InsideDelimiter  && (*___683 == '\\')  && (*(___683 + 1) == InsideDelimiter || *(___683 + 1) == '\\')) ___683 += 2; else ___683++; } if (InsideDelimiter && (*___683 != InsideDelimiter)) ___2039 = ___1303; if (___2039 && CStart < ___683) { size_t StrLen = static_cast<size_t>(___683 - CStart); *NextSubString = ___23(StrLen + 1, char, "GetNextSubString: NextSubString"); if (*NextSubString) { char* NPtr = *NextSubString; while (CStart < ___683) { if (*CStart == '\\') { if (*(CStart + 1) == InsideDelimiter) CStart++; else *NPtr++ = *CStart++; } *NPtr++ = *CStart++; } *NPtr = '\0'; } else ___2039 = ___1303; } if (___2039) { if (InsideDelimiter) ___683++; SkipWhiteSpaceOrComma(&___683); *OriginalCPtr = ___683; } ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___3840 ___3831(char const* ___3814) { REQUIRE(VALID_REF(___3814)); SkipWhiteSpaceOrComma(&___3814); REQUIRE(!ISJOINCHAR(*___3814)); ___372 ___2039 = ___4227; ___3840 ___3360 = ___3822(); char const*   ___683   = ___3814; char* CurString = NULL; while (___2039 && *___683 != '\0') { char*     NextSubString = NULL; ___372 WantsToJoin   = ___1303; if (ISJOINCHAR(*___683)) { WantsToJoin = ___4227; ___683++; SkipWhiteSpaceOrComma(&___683); } ___2039 = GetNextSubString(&___683, &NextSubString); if (___2039) { if (WantsToJoin) ___3940(&CurString, '\n'); if (NextSubString != NULL && strlen(NextSubString) != 0) ___2039 = ___3942(&CurString, NextSubString, ___1303, ___1303); else if (CurString == NULL) CurString = ___1133(___1095("")); } if (NextSubString != NULL) ___1528(NextSubString, "StringListFromCompound: NextSubString"); if (___2039 && !ISJOINCHAR(*___683)) { ___3824(___3360, CurString); if (CurString != NULL) ___1528(CurString, "current string"); CurString = NULL; } } if (CurString != NULL) ___1528(CurString, "current string"); if (!___2039) ___3829(&___3360); ENSURE(___3360 == NULL || ___3849(___3360)); return ___3360; } char *___3847(___3840 ___3821, char          ___1817, char const*   ___473) { REQUIRE(___3849(___3821)); REQUIRE(___3827(___3821) >= 1); REQUIRE(ISJOINCHAR(___1817)); REQUIRE(VALID_REF(___473)); char* ___3360 = NULL; ___372 ___2039 = ___4227; ___2226 ___1925; ___2226 ___682;
for (___1925 = 0, ___682 = ___3827(___3821), ___2039 = ___4227; ___1925 < ___682 && ___2039; ___1925++) { char* ___3814 = ___3835(___3821, ___1925); if (___3814 != NULL && strlen(___3814) != 0) { char*       CStart = NULL; char*       CEnd = NULL; char*       EscapedString = NULL; char const* EscChar = NULL; char*       StrChar = NULL; for (StrChar = ___3814; *StrChar != '\0'; StrChar++) { for (EscChar = ___473; *EscChar != '\0'; EscChar++) if (*StrChar == *EscChar) { ___2039 = ___3940(&EscapedString, '\\'); ___2039 = ___3940(&EscapedString, '\\'); break; } ___2039 = ___3940(&EscapedString, *StrChar); } CEnd = EscapedString; while (___2039 && CEnd && *CEnd != '\0') { int ___2222 = 0; CStart = CEnd; while (*CEnd != '\0' && *CEnd != '\n') { ___2222++; if (*CEnd == '"') ___2222++; CEnd++; } char* TString = ___23(___2222 + 4, char, "temp compound sub-string"); if (TString != NULL) { if (CStart == EscapedString) { if (___1925 != 0) ___2039 = ___3940(&___3360, ' '); } else { ___2039 = ___3940(&___3360, ___1817); } char* TStr = TString; *TStr++ ='"'; while (CStart && CStart != CEnd) { if (*CStart == '"') *TStr++ = '\\'; *TStr++ = *CStart++; } *TStr++ = '"'; *TStr = '\0'; ___3942(&___3360, TString, ___1303, ___1303); ___1528(TString, "___3847"); TString = NULL; if (*CEnd) CEnd++; } else { ___2039 = ___1303; } } if (EscapedString != NULL) ___1528(EscapedString, "escaped string"); } else { if (___1925 == 0) ___3942(&___3360, "\"\"", ___1303, ___1303); else ___3942(&___3360, " \"\"", ___1303, ___1303); } if (___3814 != NULL) ___1528(___3814, "string list ___2084"); } if (!___2039) { if (___3360 != NULL) { ___1528(___3360, "___3847"); ___3360 = NULL; } } ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; }
