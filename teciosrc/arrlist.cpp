#include "MASTER.h"
#include "GLOBAL.h"
#include "CodeContract.h"
#include "ALLOC.h"
#include "ARRLIST.h"
static void CopyArrayItems(char*       TargetArray, ___2226   TargetOffset, char*       SourceArray, ___2226   SourceOffset, ___2226   ___682, int32_t ___2101) { REQUIRE(VALID_REF(TargetArray)); REQUIRE(TargetOffset >= 0); REQUIRE(VALID_REF(SourceArray)); REQUIRE(SourceOffset >= 0); REQUIRE(&TargetArray[TargetOffset] != &SourceArray[SourceOffset]); REQUIRE(___682 >= 1); REQUIRE(1 <= ___2101 && ___2101 <= static_cast<int32_t>(sizeof(ArrayListItem_u))); void* TargetPtr = &TargetArray[TargetOffset * ___2101]; void* SourcePtr = &SourceArray[SourceOffset * ___2101]; memmove(TargetPtr, SourcePtr, static_cast<size_t>(___682) * ___2101); } static ___2226 AdjustCapacityRequest(___134 ASSERT_ONLY(___94), ___2226    ___691, ___2226    ___3355, ___90   ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE((___3355 == 0 && ___691 == 0) || ___3355 > ___691); ___4279(___492); ___2226 ___3360; if (___3355 != 0 && ___691 == 0) { ___3360 = ___3355; } else { ___2226 const DEFAULT_CAPACITY = 32; ___2226       BlockSize = MAX(DEFAULT_CAPACITY, ___691 / 2); if (___3355 == 0) ___3360 = DEFAULT_CAPACITY; else ___3360 = ((___3355 - 1) / BlockSize + 1) * BlockSize; } ENSURE(___3360 == 0 || ___3360 >= ___3355); return ___3360; } static int32_t GetElementSize(ArrayListType_e ___4237) { REQUIRE(VALID_ENUM(___4237, ArrayListType_e)); int32_t ___3360; switch (___4237) { case ArrayListType_UInt8: ___3360 = static_cast<int32_t>(sizeof(uint8_t)); break; case ArrayListType_UInt16: ___3360 = static_cast<int32_t>(sizeof(uint16_t)); break; case ArrayListType_UInt32: ___3360 = static_cast<int32_t>(sizeof(uint32_t)); break; case ArrayListType_UInt64: ___3360 = static_cast<int32_t>(sizeof(uint64_t)); break; case ArrayListType_Int64: ___3360 = static_cast<int32_t>(sizeof(int64_t)); break; case ArrayListType_Char: ___3360 = static_cast<int32_t>(sizeof(char)); break; case ArrayListType_Short: ___3360 = static_cast<int32_t>(sizeof(short)); break; case ArrayListType_Int: ___3360 = static_cast<int32_t>(sizeof(int)); break; case ArrayListType_Long: ___3360 = static_cast<int32_t>(sizeof(long)); break; case ArrayListType_Float: ___3360 = static_cast<int32_t>(sizeof(float)); break; case ArrayListType_Double: ___3360 = static_cast<int32_t>(sizeof(double)); break; case ArrayListType_LgIndex: ___3360 = static_cast<int32_t>(sizeof(___2226)); break; case ArrayListType_EntIndex: ___3360 = static_cast<int32_t>(sizeof(___1170)); break; case ArrayListType_SmInteger: ___3360 = static_cast<int32_t>(sizeof(int32_t)); break; case ArrayListType_Boolean: ___3360 = static_cast<int32_t>(sizeof(___372)); break; case ArrayListType_ArbParam: ___3360 = static_cast<int32_t>(sizeof(___90)); break; case ArrayListType_UInt8Ptr: ___3360 = static_cast<int32_t>(sizeof(uint8_t*)); break; case ArrayListType_UInt16Ptr: ___3360 = static_cast<int32_t>(sizeof(uint16_t*)); break; case ArrayListType_UInt32Ptr:
___3360 = static_cast<int32_t>(sizeof(uint32_t*)); break; case ArrayListType_UInt64Ptr: ___3360 = static_cast<int32_t>(sizeof(uint64_t*)); break; case ArrayListType_Int64Ptr: ___3360 = static_cast<int32_t>(sizeof(int64_t*)); break; case ArrayListType_CharPtr: ___3360 = static_cast<int32_t>(sizeof(char*)); break; case ArrayListType_ShortPtr: ___3360 = static_cast<int32_t>(sizeof(short*)); break; case ArrayListType_IntPtr: ___3360 = static_cast<int32_t>(sizeof(int*)); break; case ArrayListType_LongPtr: ___3360 = static_cast<int32_t>(sizeof(long*)); break; case ArrayListType_FloatPtr: ___3360 = static_cast<int32_t>(sizeof(float*)); break; case ArrayListType_DoublePtr: ___3360 = static_cast<int32_t>(sizeof(double*)); break; case ArrayListType_LgIndexPtr: ___3360 = static_cast<int32_t>(sizeof(___2226*)); break; case ArrayListType_EntIndexPtr: ___3360 = static_cast<int32_t>(sizeof(___1170*)); break; case ArrayListType_SmIntegerPtr: ___3360 = static_cast<int32_t>(sizeof(int32_t*)); break; case ArrayListType_BooleanPtr: ___3360 = static_cast<int32_t>(sizeof(___372*)); break; case ArrayListType_ArbParamPtr: ___3360 = static_cast<int32_t>(sizeof(___90*)); break; case ArrayListType_VoidPtr: ___3360 = static_cast<int32_t>(sizeof(void*)); break; case ArrayListType_FunctionPtr: ___3360 = static_cast<int32_t>(sizeof(void (*)())); break; case ArrayListType_Any: ___3360 = static_cast<int32_t>(sizeof(ArrayListItem_u)); break; default: ___3360 = 0; ___476(___1303); break; } ENSURE(1 <= ___3360 && ___3360 <= static_cast<int32_t>(sizeof(ArrayListItem_u))); return ___3360; } static void DestroyItems(___134               ___94, ___2226                  ___2096, int32_t                ___2101, ___2226                  ___682, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(1 <= ___682 && ___2096 + ___682 <= ___94->___682); REQUIRE(VALID_FN_REF(___2093)); for (___2226 ___1925 = 0; ___1925 < ___682; ___1925++) { ___2226 ___2095 = (___1925 + ___2096) * ___2101; ASSERT_ONLY(___372 CHECK_DoContinue =) ___2093(static_cast<void*>(&___94->Array[___2095]), ___492); ___476(CHECK_DoContinue); } } static ___372 DuplicateItems(char*                      TargetArray, ___2226                  TargetItemOffset, char*                      SourceArray, ___2226                  SourceItemOffset, int32_t                ___2101, ___2226                  ___682, ArrayListItemDuplicator_pf ___2094, ___90                 ___492) { REQUIRE(VALID_REF(TargetArray)); REQUIRE(TargetItemOffset >= 0); REQUIRE(VALID_REF(SourceArray)); REQUIRE(SourceItemOffset >= 0); REQUIRE(1 <= ___2101 && ___2101 <= (int32_t)sizeof(ArrayListItem_u)); REQUIRE(___682 >= 1); REQUIRE(VALID_FN_REF(___2094)); ___372 ___2039 = ___4227; for (___2226 ___1925 = 0; ___1925 < ___682 && ___2039; ___1925++) { ___2226 TargetItemIndex = (___1925 + TargetItemOffset) * ___2101;
___2226 SourceItemIndex = (___1925 + SourceItemOffset) * ___2101; ___2039 = ___2094(static_cast<void*>(&TargetArray[TargetItemIndex]), static_cast<void*>(&SourceArray[SourceItemIndex]), ___492); } ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ArrayListIsValid(___134 ___94) { ___372 ___2067 = (VALID_REF(___94) && VALID_ENUM(___94->___4237, ArrayListType_e) && (1 <= ___94->___2101 && ___94->___2101 <= static_cast<int32_t>(sizeof(ArrayListItem_u))) && (0 <= ___94->___682 && ___94->___682 <= ___94->___437)); ENSURE(VALID_BOOLEAN(___2067)); return ___2067; } ArrayListType_e ArrayListGetType(___134 ___94) { REQUIRE(ArrayListIsValid(___94)); ArrayListType_e ___3360 = ___94->___4237; ENSURE(VALID_ENUM(___3360, ArrayListType_e)); return ___3360; } ___372 ArrayListEnlargeCapacity(___134 ___94, ___2226    ___3355) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(IMPLICATION(___3355 == 0, ___94->___437 == 0)); ___372 ___2039; if (___3355 == 0 || ___3355 > ___94->___437) { ___2226 AdjustedCapacity = ___94->___438(___94, ___94->___437, ___3355, ___94->___439); ___476(AdjustedCapacity == 0 || AdjustedCapacity >= ___3355); char* EnlargedArray = NULL; ___2039 = (AdjustedCapacity != 0); if (___2039) { EnlargedArray = ___23(AdjustedCapacity * ___94->___2101, char, "array list"); if (EnlargedArray == NULL) { if (___3355 != 0) AdjustedCapacity = ___3355; else AdjustedCapacity = 1; EnlargedArray = ___23(AdjustedCapacity * ___94->___2101, char, "array list"); } ___2039 = (EnlargedArray != NULL); } if (___2039) { memset(&EnlargedArray[___94->___682*___94->___2101], 0, (AdjustedCapacity - ___94->___682)*___94->___2101); if (___94->Array != NULL) { if (___94->___682 != 0) CopyArrayItems(EnlargedArray, 0, ___94->Array, 0, ___94->___682, ___94->___2101); ___1528(___94->Array, "array list"); } ___94->Array    = EnlargedArray; ___94->___437 = AdjustedCapacity; } } else { ___2039 = ___4227; } ENSURE(ArrayListIsValid(___94)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___134 ArrayListAlloc(___2226                           ___1186, ArrayListType_e                     ___4237, ArrayListCapacityRequestAdjuster_pf ___438, ___90                          ___439) { REQUIRE(___1186 >= 0); REQUIRE(VALID_ENUM(___4237, ArrayListType_e)); ___134 ___3360 = ALLOC_ITEM(___135, "ArrayList structure"); if (___3360 != NULL) { ___3360->Array           = NULL; ___3360->___4237            = ___4237; ___3360->___2101        = GetElementSize(___4237); ___3360->___682           = 0; ___3360->___437        = 0; ___3360->___2079 = ___1303; if (___438 != NULL) { ___3360->___438           = ___438;
___3360->___439 = ___439; } else { ___3360->___438           = AdjustCapacityRequest; ___3360->___439 = 0; } if (!ArrayListEnlargeCapacity(___3360, ___1186)) ArrayListDealloc(&___3360, NULL, 0); } ENSURE(ArrayListIsValid(___3360) || ___3360 == NULL); ENSURE(IMPLICATION(___3360 != NULL, ___3360->___437 >= ___1186)); return ___3360; } void ArrayListDealloc(___134*              ___94, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(VALID_REF(___94)); REQUIRE(ArrayListIsValid(*___94) || *___94 == NULL); REQUIRE(VALID_FN_REF(___2093) || ___2093 == NULL); if (*___94 != NULL) { if (___2093 != NULL && (*___94)->___682 != 0) DestroyItems(*___94, 0, (*___94)->___2101, (*___94)->___682, ___2093, ___492); if ((*___94)->___437 != 0) ___1528((*___94)->Array, "array list"); ___1529(*___94, "ArrayList structure"); *___94 = NULL; } ENSURE(*___94 == NULL); }
 #if !defined USE_MACROS_FOR_FUNCTIONS
___2226 ArrayListGetCount_FUNC(___134 ___94) { REQUIRE(ArrayListIsValid(___94)); ___2226 ___3360 = ArrayListGetCount_MACRO(___94); ENSURE(___3360 >= 0); return ___3360; }
 #endif
void ArrayListDeleteAllItems(___134               ___94, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(VALID_FN_REF(___2093) || ___2093 == NULL); REQUIRE(!___94->___2079); if (___2093 != NULL && ___94->___682 != 0) DestroyItems(___94, 0, ___94->___2101, ___94->___682, ___2093, ___492); if (___94->___682 != 0) memset(&___94->Array[0], 0, ___94->___682*___94->___2101); ___94->___682 = 0; ENSURE(ArrayListIsValid(___94) && ___94->___682 == 0); } void ArrayListDeleteItems(___134               ___94, ___2226                  ___2096, ___2226                  ___682, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(1 <= ___682 && ___2096 + ___682 <= ___94->___682); REQUIRE(VALID_FN_REF(___2093) || ___2093 == NULL); REQUIRE(!___94->___2079); if (___2093 != NULL) DestroyItems(___94, ___2096, ___94->___2101, ___682, ___2093, ___492); if (___2096 + ___682 < ___94->___682) CopyArrayItems(___94->Array, ___2096, ___94->Array, ___2096 + ___682, ___94->___682 - (___2096 + ___682), ___94->___2101); memset(&___94->Array[(___94->___682 - ___682)*___94->___2101], 0, ___682*___94->___2101); ___94->___682 -= ___682; ENSURE(ArrayListIsValid(___94)); } void ArrayListDeleteItem(___134               ___94, ___2226                  ___2096, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(VALID_FN_REF(___2093) || ___2093 == NULL); ArrayListDeleteItems(___94, ___2096, 1, ___2093, ___492); ENSURE(ArrayListIsValid(___94)); } ___134 ArrayListRemoveItems(___134 ___94, ___2226    ___2096, ___2226    ___682) { ___134 ___3360; REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(1 <= ___682 && ___2096 + ___682 <= ___94->___682); REQUIRE(!___94->___2079); ___3360 = ArrayListGetItems(___94, ___2096, ___682); if (___3360 != NULL) ArrayListDeleteItems(___94, ___2096, ___682, NULL, 0); ENSURE(ArrayListIsValid(___94)); ENSURE(ArrayListIsValid(___3360) || ___3360 == NULL); return ___3360; } ArrayListItem_u ArrayListRemoveItem(___134 ___94, ___2226    ___2096) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(!___94->___2079); ArrayListItem_u ___3360; CopyArrayItems(static_cast<char*>(&___3360.___470), 0, ___94->Array, ___2096, 1, ___94->___2101); ArrayListDeleteItems(___94, ___2096, 1, NULL, 0);
ENSURE(ArrayListIsValid(___94)); return ___3360; } ___372 ArrayListInsert(___134 ___3947, ___2226    ___2096, ___134 ___3643) { REQUIRE(ArrayListIsValid(___3947)); REQUIRE(___2096 >= 0); REQUIRE(ArrayListIsValid(___3643)); REQUIRE(___3947 != ___3643); REQUIRE(___3947->___4237 == ___3643->___4237); REQUIRE(!___3947->___2079); ___372 ___2039 = ___4227; if (___3643->___682 != 0) { ___2226 NeededCapacity; if (___2096 > ___3947->___682) NeededCapacity = ___2096 + ___3643->___682; else NeededCapacity = ___3947->___682 + ___3643->___682; if (NeededCapacity > ___3947->___437) ___2039 = ArrayListEnlargeCapacity(___3947, NeededCapacity); if (___2039) { if (___2096 < ___3947->___682) { CopyArrayItems(___3947->Array, ___2096 + ___3643->___682, ___3947->Array, ___2096, ___3947->___682 - ___2096, ___3947->___2101); ___3947->___682 += ___3643->___682; } else { if (___2096 > ___3947->___682) ___3947->___682 = ___2096 + ___3643->___682; else ___3947->___682 += ___3643->___682; } CopyArrayItems(___3947->Array, ___2096, ___3643->Array, 0, ___3643->___682, ___3643->___2101); } } ENSURE(ArrayListIsValid(___3947)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ArrayListInsertItem(___134    ___94, ___2226       ___2096, ArrayListItem_u ___2085) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(___2096 >= 0); REQUIRE(!___94->___2079); ___372 ___2039 = ___4227; ___2226 NeededCapacity; if (___2096 > ___94->___682) NeededCapacity = ___2096 + 1; else NeededCapacity = ___94->___682 + 1; if (NeededCapacity > ___94->___437) ___2039 = ArrayListEnlargeCapacity(___94, NeededCapacity); if (___2039) { if (___2096 < ___94->___682) { CopyArrayItems(___94->Array, ___2096 + 1, ___94->Array, ___2096, ___94->___682 - ___2096, ___94->___2101); ___94->___682++; } else { if (___2096 > ___94->___682) ___94->___682 = ___2096 + 1; else ___94->___682++; } CopyArrayItems(___94->Array, ___2096, static_cast<char*>(&___2085.___470), 0, 1, ___94->___2101); } ENSURE(ArrayListIsValid(___94)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ArrayListVisitItems(___134            ___94, ___2226               ___2096, ___2226               ___682, ArrayListItemVisitor_pf ___2102, ___90              ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(VALID_FN_REF(___2102)); ___372 ___2079 = ___94->___2079; ___94->___2079 = ___4227; ___2226   ___1925; int32_t ___2101; ___372   ___1094 = ___4227; for (___1925 = 0, ___2101 = ___94->___2101; ___1925 < ___682 && ___1094; ___1925++) { ___2226 ___2095 = (___1925 + ___2096) * ___2101; ___1094 = ___2102(static_cast<void*>(&___94->Array[___2095]), ___492); } ___94->___2079 = ___2079; ENSURE(___94->___2079 == ___2079); ENSURE(VALID_BOOLEAN(___1094)); return ___1094; } ___134 ArrayListGetItems(___134 ___94,
___2226    ___2096, ___2226    ___682) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); REQUIRE(1 <= ___682 && ___2096 + ___682 <= ___94->___682); ___134 ___3360 = ArrayListAlloc(___682, ___94->___4237, ___94->___438, ___94->___439); if (___3360 != NULL) { CopyArrayItems(___3360->Array, 0, ___94->Array, ___2096, ___682, ___94->___2101); ___3360->___682 = ___682; } ENSURE(ArrayListIsValid(___94)); ENSURE(ArrayListIsValid(___3360) || ___3360 == NULL); return ___3360; } ArrayListItem_u ArrayListGetItem(___134 ___94, ___2226    ___2096) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); ArrayListItem_u ___3360; CopyArrayItems(static_cast<char*>(&___3360.___470), 0, ___94->Array, ___2096, 1, ___94->___2101); return ___3360; }
 #if !defined USE_MACROS_FOR_FUNCTIONS
void const* ArrayListGetItemInternalRef_FUNC(___134 ___94, ___2226    ___2096) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(0 <= ___2096 && ___2096 <= ___94->___682 - 1); void const* ___3360 = ArrayListGetItemInternalRef_MACRO(___94, ___2096); ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; }
 #endif
___372 ArrayListSetItem(___134               ___94, ___2226                  ___2096, ArrayListItem_u            ___2085, ArrayListItemDestructor_pf ___2093, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(___2096 >= 0); REQUIRE(VALID_FN_REF(___2093) || ___2093 == NULL); REQUIRE(IMPLICATION(___2096 + 1 > ___94->___682, !___94->___2079)); ___372 ___2039 = ___4227; if (___2093 != NULL && ___2096 < ___94->___682) DestroyItems(___94, ___2096, ___94->___2101, 1, ___2093, ___492); if (___2096 + 1 > ___94->___437) ___2039 = ArrayListEnlargeCapacity(___94, ___2096 + 1); if (___2039) { if (___2096 + 1 > ___94->___682) ___94->___682 = ___2096 + 1; CopyArrayItems(___94->Array, ___2096, static_cast<char*>(&___2085.___470), 0, 1, ___94->___2101); } ENSURE(ArrayListIsValid(___94)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ArrayListAppendItem(___134    ___94, ArrayListItem_u ___2085) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(!___94->___2079); ___372 ___2039 = ArrayListInsertItem(___94, ___94->___682, ___2085); ENSURE(ArrayListIsValid(___94)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___372 ArrayListAppend(___134 ___3947, ___134 ___3643) { REQUIRE(ArrayListIsValid(___3947)); REQUIRE(ArrayListIsValid(___3643)); REQUIRE(___3947 != ___3643); REQUIRE(___3947->___4237 == ___3643->___4237); REQUIRE(!___3947->___2079); ___372 ___2039 = ArrayListInsert(___3947, ___3947->___682, ___3643); ENSURE(ArrayListIsValid(___3947)); ENSURE(VALID_BOOLEAN(___2039)); return ___2039; } ___134 ArrayListCopy(___134               ___94, ArrayListItemDuplicator_pf ___2094, ___90                 ___492) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(VALID_FN_REF(___2094) || ___2094 == NULL); ___134 ___3360 = ArrayListAlloc(___94->___682, ___94->___4237, ___94->___438, ___94->___439); if (___3360 != NULL && ___94->___682 != 0) { ___372 ___2039 = ___4227; if (___2094 != NULL) ___2039 = DuplicateItems(___3360->Array, 0, ___94->Array, 0, ___94->___2101, ___94->___682, ___2094, ___492); else CopyArrayItems(___3360->Array, 0, ___94->Array, 0, ___94->___682, ___94->___2101); if (___2039) ___3360->___682 = ___94->___682; else ArrayListDealloc(&___3360, NULL, 0); } ENSURE(___3360 == NULL || (ArrayListIsValid(___3360) && ___3360->___682 == ___94->___682)); return ___3360; } void* ArrayListToArray(___134               ___3643, ArrayListItemDuplicator_pf ___2094, ___90                 ___492) { REQUIRE(ArrayListIsValid(___3643)); REQUIRE(VALID_FN_REF(___2094) || ___2094 == NULL); void* ___3360; if (___3643->___682 != 0) ___3360 = static_cast<void*>(___23(___3643->___682 * ___3643->___2101, char, "native array")); else ___3360 = NULL;
if (___3360 != NULL) { ___372 ___2039 = ___4227; if (___2094 != NULL) ___2039 = DuplicateItems((char*)___3360, 0, ___3643->Array, 0, ___3643->___2101, ___3643->___682, ___2094, ___492); else CopyArrayItems(static_cast<char*>(___3360), 0, ___3643->Array, 0, ___3643->___682, ___3643->___2101); if (!___2039) { char* Tmp = static_cast<char*>(___3360); ___1528(Tmp, "native array"); } } ENSURE(VALID_REF(___3360) || ___3360 == NULL); return ___3360; } ___134 ArrayListFromArray(void*                      ___3643, ___2226                  ___682, ArrayListType_e            ___4237, ArrayListItemDuplicator_pf ___2094, ___90                 ___492) { REQUIRE(VALID_REF(___3643)); REQUIRE(___682 >= 0); REQUIRE(VALID_ENUM(___4237, ArrayListType_e)); REQUIRE(VALID_FN_REF(___2094) || ___2094 == NULL); ___134 ___3360 = ArrayListAlloc(___682, ___4237, NULL, 0); if (___3360 != NULL && ___682 != 0) { ___372 ___2039 = ___4227; if (___2094 != NULL) ___2039 = DuplicateItems(___3360->Array, 0, (char*)___3643, 0, ___3360->___2101, ___682, ___2094, ___492); else CopyArrayItems(___3360->Array, 0, static_cast<char*>(___3643), 0, ___682, ___3360->___2101); if (___2039) ___3360->___682 = ___682; else ArrayListDealloc(&___3360, NULL, 0); } ENSURE(ArrayListIsValid(___3360) || ___3360 == NULL); return ___3360; } ___372 ArrayListBSearch(___134               ___94, ArrayListItem_u            ___2085, ArrayListItemComparator_pf ___533, ___90                 ___492, ___2226*                 ___2095) { REQUIRE(ArrayListIsValid(___94)); REQUIRE(VALID_FN_REF(___533)); REQUIRE(___2095 == NULL || VALID_REF(___2095)); ___2226 MiddleItemIndex = 0; ___2226 FirstItemIndex  = 0; ___2226 NumItems        = ___101(___94); ___2226 LastItemIndex   = NumItems - 1; ___372 Found = ___1303; while (FirstItemIndex <= LastItemIndex && !Found) { if (LastItemIndex - FirstItemIndex <= 1) { int const diffFromFirst = ___533(ArrayListGetItem(___94, FirstItemIndex), ___2085, ___492); if (diffFromFirst >= 0) { MiddleItemIndex = FirstItemIndex; Found = (diffFromFirst == 0); } else { int const diffFromLast = ___533(ArrayListGetItem(___94, LastItemIndex), ___2085, ___492); if (diffFromLast < 0) MiddleItemIndex = LastItemIndex + 1; else MiddleItemIndex = LastItemIndex; Found = (diffFromLast == 0); } break; } else { MiddleItemIndex = (FirstItemIndex + LastItemIndex) / 2; int const diffFromMiddle = ___533(ArrayListGetItem(___94, MiddleItemIndex), ___2085, ___492); if (diffFromMiddle > 0) LastItemIndex = MiddleItemIndex; else if (diffFromMiddle < 0) FirstItemIndex = MiddleItemIndex + 1; else Found = ___4227; } } if (___2095 != NULL) { if (Found || NumItems == 0 || FirstItemIndex < NumItems) *___2095 = MiddleItemIndex; else *___2095 = NumItems; } ENSURE(IMPLICATION(___2095 != NULL, 0 <= *___2095 && *___2095 <= ___101(___94))); ENSURE(VALID_BOOLEAN(Found)); return Found; }
 #if !defined USE_MACROS_FOR_FUNCTIONS
void const* ArrayListGetInternalRef_FUNC(___134 ___94) { REQUIRE(ArrayListIsValid(___94)); void const* ___3360 = ___113(___94); ENSURE(___3360 == NULL || VALID_REF(___3360)); return ___3360; }
 #endif
 #if !defined NO_ASSERTS
namespace { int intArrListItemComparitor(ArrayListItem_u ___2086, ArrayListItem_u ___2087, ___90) { int const i1 = ___2086.Int; int const i2 = ___2087.Int; int ___3359; if (i1 == i2) ___3359 = 0; else if (i1 < i2) ___3359 = -1; else ___3359 = 1; ENSURE(___3359 == -1 || ___3359 == 1 || ___3359 == 0); return ___3359; } void runAnArrayListBSearchTest(std::vector<int> const intList, int  newValue, int expectedOffset, bool expectingExactMatch) { ___134 intArrList = ArrayListAlloc(0, ArrayListType_Int); for (auto i : intList) VERIFY(ArrayListAppendInt(intArrList, i)); ArrayListItem_u newItem; newItem.Int = newValue; ___2226 resultingOffset{}; bool const wasExactMatch = ArrayListBSearch(intArrList, newItem, intArrListItemComparitor, (___90)0, &resultingOffset) == ___4227; ArrayListDealloc(&intArrList); ENSURE(wasExactMatch   == expectingExactMatch); ENSURE(resultingOffset == expectedOffset); } void testArrayListBSearch() { runAnArrayListBSearchTest({1,2,3,4},   7, 4, false); runAnArrayListBSearchTest({1,2,3,4,5}, 7, 5, false); runAnArrayListBSearchTest({1,3,5,6},   0, 0, false); runAnArrayListBSearchTest({1,3,5,6,8}, 0, 0, false); runAnArrayListBSearchTest({1,3,5,6},   3, 1, true); runAnArrayListBSearchTest({1,3,5,6,8}, 3, 1, true); runAnArrayListBSearchTest({1,3,5,6},   1, 0, true); runAnArrayListBSearchTest({1,3,5,6},   6, 3, true); runAnArrayListBSearchTest({1,3,5,6,8}, 8, 4, true); runAnArrayListBSearchTest({1,3,5,7,9}, 4, 2, false); runAnArrayListBSearchTest({1,3},       2, 1, false); runAnArrayListBSearchTest({51,52,100,104,108,124,128,500,504,508,512,516,520,524,528,532,536,540,544,548,552,556,560}, 56, 2, false); runAnArrayListBSearchTest({51,52,56,100,104,108,112}, 60, 3, false); } } void runArrayListUnitTests() { testArrayListBSearch(); }
 #endif
